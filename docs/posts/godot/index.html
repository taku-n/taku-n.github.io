<!DOCTYPE html>

<html>

<head>
<meta charset="UTF-8">
<title>Godot - 非同期エンジニアブログ</title>
</head>

<body>
<a href="../../">戻る</a>

<h1 id="godot">Godot</h1>
<h2 id="learn-to-code-from-zero-with-godot">Learn to Code From Zero with Godot</h2>
<p><a href="https://gdquest.github.io/learn-gdscript/">Learn to Code From Zero with Godot</a></p>
<h3 id="lesson-01---what-code-is-like">Lesson 01 - What Code is Like</h3>
<pre tabindex="0"><code>print(&#34;Welcome!&#34;)
</code></pre><h3 id="lesson-02---your-first-error">Lesson 02 - Your First Error</h3>
<pre tabindex="0"><code>func this_code_is_wrong():
    #return
</code></pre><h3 id="lesson-03---we-stand-on-the-shoulders-of-giants">Lesson 03 - We Stand on the Shoulders of Giants</h3>
<pre tabindex="0"><code>show()
hide()
rotate(0.3)
move_local_x(20)
move_local_y(20)
</code></pre><pre tabindex="0"><code>PI
</code></pre><h3 id="lesson-04---drawing-a-rectangle">Lesson 04 - Drawing a Rectangle</h3>
<pre tabindex="0"><code>move_forward(200)
turn_left(45)
turn_right(45)
</code></pre><h3 id="lesson-05---coding-your-first-function">Lesson 05 - Coding Your First Function</h3>
<pre tabindex="0"><code>func move_and_rotate():
    move_forward(200)
    turn_right(90)

func draw_square(size):
    move_forward(size)
    turn_right(90)
    move_forward(size)
    turn_right(90)
    move_forward(size)
    turn_right(90)
    move_forward(size)
    turn_right(90)
</code></pre><pre tabindex="0"><code>jump(-100,50)
</code></pre><p>The instructions inside the function must all start with a leading tab character.</p>
<p>Identifiers also have to start with a letter or an underscore; You can&rsquo;t begin with a number, but you can use numbers after the first character.<br>
Note that it&rsquo;s fine to use capital letters.</p>
<h3 id="lesson-06---your-first-function-parameter">Lesson 06 - Your First Function Parameter</h3>
<pre tabindex="0"><code>func move_local_xy(offset_x, offset_y):
    move_local_x(offset_x)
    move_local_y(offset_y)
</code></pre><h3 id="lesson-07---introduction-to-member-variables">Lesson 07 - Introduction to Member Variables</h3>
<pre tabindex="0"><code>position
scale
</code></pre><pre tabindex="0"><code>rotation = 0
position.x = 200
position.y = 250
scale.x = 1.5
scale.y = 1.5
</code></pre><h3 id="lesson-08---defining-your-own-variables">Lesson 08 - Defining Your Own Variables</h3>
<pre tabindex="0"><code>var health = 5
health = health - 1
print(health)
</code></pre><pre tabindex="0"><code>var health
var health  # Error
</code></pre><pre tabindex="0"><code>var health = 100
health = &#34;This is some text&#34;
</code></pre><p>Variables are case-sensitive, which means health and Health are technically different variables.</p>
<h3 id="lesson-09---adding-and-subtracting">Lesson 09 - Adding and Subtracting</h3>
<pre tabindex="0"><code>health -= amount
health = health - amount

health += amount
health = health + amount
</code></pre><h3 id="lesson-10---the-game-loop">Lesson 10 - The Game Loop</h3>
<pre tabindex="0"><code>func _process(delta):
    rotate(0.05)
</code></pre><p>This function can run hundreds of times a second.<br>
The _process() function takes one parameter: delta.<br>
If the function exists in your code, and it is called precisely _process, then Godot will automatically run it every frame.<br>
When Godot draws on the screen, we call that a frame.<br>
The faster your computer, the more times _process() will run.<br>
Godot will try and run _process() as quickly as it can.</p>
<h3 id="lesson-11---time-delta">Lesson 11 - Time Delta</h3>
<p>It&rsquo;s not just our character that has a _process() function; Almost everything in the game has a _process() function!<br>
Dozens of times per second, Godot runs every _process() function in the game to update the game world.<br>
After that, it displays an image of the game world on the screen. We call that image a frame.<br>
Godot then moves on to calculating the next frame.</p>
<p>Depending on the game, the computer, and what the game engine needs to calculate, frames take more or less time to display.<br>
There will always be milliseconds variations frame to frame.<br>
That is why the _process() function receives a delta parameter.<br>
Delta represents a time difference. It&rsquo;s the time passed since the previous frame, in seconds.</p>
<pre tabindex="0"><code>func _process(delta):
    move_local_x(100 * delta)
</code></pre><p>The robot moves 100 pixels per second.</p>
<h3 id="lesson-12---using-variables-to-make-code-easier-to-read">Lesson 12 - Using Variables to Make Code Easier to Read</h3>
<pre tabindex="0"><code>var angular_speed = 4

func _process(delta):
    rotate(angular_speed * delta)

func set_angular_speed(new_angular_speed):
    angular_speed = new_angular_speed
</code></pre><pre tabindex="0"><code>func _process(delta):
    var angular_speed = 4
    rotate(angular_speed * delta)

func set_angular_speed(new_angular_speed):
    angular_speed = new_angular_speed  # Error
</code></pre><h3 id="lesson-13---conditions">Lesson 13 - Conditions</h3>
<pre tabindex="0"><code>true
false
</code></pre><pre tabindex="0"><code>func heal(amount):
    health += amount
    if health &gt; 100:
        health = 100
</code></pre><pre tabindex="0"><code>if health &gt; 100:  # If health is greater than 100
    pass
if health &lt; 50:  # If health is less than 50
    pass
if health == 25:  # If health is equal to 25
    pass
if health != 7:  # If health is not equal to 7
    pass
</code></pre><pre tabindex="0"><code>func run():
    var speed = 120
    if speed &lt; 100:
        print(&#34;You&#39;re slow!&#34;)
    else:
        print(&#34;You&#39;re fast!&#34;)
</code></pre><h3 id="lesson-14---multiplying">Lesson 14 - Multiplying</h3>
<pre tabindex="0"><code>var level = 5
var power = 3

func calculate_damage():
    var damage = power * level
    damage *= 2
</code></pre><h3 id="lesson-15---2d-vectors">Lesson 15 - 2D Vectors</h3>
<pre tabindex="0"><code>func level_up():
    scale.x += 0.2
    scale.y += 0.2
</code></pre><p>In Godot, 2D vectors are a common value type named Vector2,</p>
<pre tabindex="0"><code>func level_up():
    scale += Vector2(0.2, 0.2)

func move():
    position += Vector2(20, 20)
</code></pre><pre tabindex="0"><code>func reset_robot():
    position = Vector2(0, 0)
    scale = Vector2(1.0, 1.0)
</code></pre><h3 id="lesson-16---introduction-to-while-loops">Lesson 16 - Introduction to While Loops</h3>
<pre tabindex="0"><code>var number = 0
while number &lt; 4:
    print(number)
    number += 1
</code></pre><h3 id="lesson-17---introduction-to-for-loops">Lesson 17 - Introduction to For Loops</h3>
<pre tabindex="0"><code>for number in range(3):
    print(number)
</code></pre><p>Calling range(3) outputs the list of numbers [0, 1, 2],<br>
This code behaves the same as the previous example:</p>
<pre tabindex="0"><code>for element in [0, 1, 2]:
    print(element)
</code></pre><h3 id="lesson-18---creating-arrays">Lesson 18 - Creating arrays</h3>
<pre tabindex="0"><code>[1, 2, 6, 7]
[Vector2(0, 0), Vector2(4, 3), 5, -1.0]
var numbers = [1, 2, 6, 7]
var turtle_path = [
		Vector2(1, 0),
		Vector2(1, 1),
		Vector2(2, 1),
		Vector2(3, 1),
		Vector2(4, 1),
		Vector2(5, 1),
		Vector2(5, 2),
		Vector2(5, 3),
]
</code></pre><pre tabindex="0"><code>void select_units(cells: Array)
</code></pre><pre tabindex="0"><code>select_units([
		Vector2(0, 3),
		Vector2(1, 0),
		Vector2(4, 2),
		Vector2(5, 1),
])
</code></pre><h3 id="lesson-19---looping-over-arrays">Lesson 19 - Looping over arrays</h3>
<pre tabindex="0"><code>var numbers = [0, 1, 2]
for number in numbers:
    print(number)
</code></pre><pre tabindex="0"><code>for cell in cells:
    if cell in units:
        selected_units.append(cell)
</code></pre><p>In a condition, the in keyword allows you to check if a value exists in an array.<br>
The array&rsquo;s append() function appends a new value at the end of the array.</p>
<pre tabindex="0"><code>void draw_rectangle(length: float, height: float)
void jump(x: float, y: float)
</code></pre><pre tabindex="0"><code>var rectangle_sizes = [Vector2(200, 120), Vector2(140, 80), Vector2(80, 140), Vector2(200, 140)]

func run():
	for x in rectangle_sizes:
		draw_rectangle(x.x, x.y)
		jump(x.x + 100, 0)
</code></pre><h3 id="lesson-20---strings">Lesson 20 - Strings</h3>
<pre tabindex="0"><code>String
</code></pre><pre tabindex="0"><code>&#34;This is a text string.&#34;
var my_name = &#34;Robot&#34;
print(my_name)
</code></pre><pre tabindex="0"><code>for character in &#34;Robot&#34;:
    print(character)  # R
                      # o
                      # b
                      # o
                      # t
</code></pre><pre tabindex="0"><code>var combo = [&#34;jump&#34;, &#34;damage&#34;, &#34;damage&#34;, &#34;jump&#34;, &#34;level&#34;]
</code></pre><pre tabindex="0"><code>combo = [&#34;jab&#34;, &#34;jab&#34;, &#34;uppercut&#34;]
for x in combo:
	play_animation(x)
</code></pre><h3 id="lesson-21---functions-that-return-a-value">Lesson 21 - Functions that return a value</h3>
<pre tabindex="0"><code>round(11.4)  # 11
round(38.5)  # 39
</code></pre><p>The lerp() function, short for linear interpolate, calculates and returns a weighted avarage between two values.<br>
It takes three arguments: the two values to average and a value between 0.0 and 1.0 to skew the result.</p>
<pre tabindex="0"><code>func _process(delta):
    position = lerp(position, get_local_mouse_position(), 2 * delta)
</code></pre><pre tabindex="0"><code>var cell_size = Vector2(120, 120)

func convert_to_world_coordinates(cell):
    return cell * cell_size + cell_size / 2  # Vector2(1, 1) * Vector2(120, 120) + Vector2(120, 120) / 2

var world_position = convert_to_world_coordinates(Vector2(1, 1))
print(world_position)  # Vector2(180, 180)
</code></pre><h3 id="lesson-22---appending-and-popping-values-from-arrays">Lesson 22 - Appending and popping values from arrays</h3>
<p>Queue</p>
<pre tabindex="0"><code>var waiting_orders = []
var completed_orders = []

func add_order(meal_name):
    waiting_orders.append(meal_name)

func complete_current_order():
    var first_order = waiting_orders.pop_front()
    completed_orders.append(first_order)
</code></pre><p>Stack</p>
<pre tabindex="0"><code>var crates = [&#34;sword&#34;, &#34;gems&#34;, &#34;healing heart&#34;]

func use_top_crate():
    var crate = crates.pop_back()
    use(crate)
</code></pre><pre tabindex="0"><code>var crates = [&#34;sword&#34;, &#34;shield&#34;, &#34;gems&#34;]

crates.pop_back()
print(crates)  # [sword, shield]
</code></pre><pre tabindex="0"><code>var crates = [&#34;healing heart&#34;, &#34;shield&#34;, &#34;gems&#34;, &#34;sword&#34;]

func run():
	while crates:
		crates.pop_back()
</code></pre><p>You can check if the crates array still contains values by writing while crates:</p>
<h3 id="lesson-23---accessing-values-in-arrays">Lesson 23 - Accessing values in arrays</h3>
<pre tabindex="0"><code>var inventory = [
    &#34;sword&#34;,
    &#34;shield&#34;,
    &#34;healing heart&#34;,
    &#34;gems&#34;,
    &#34;healing heart&#34;,
    &#34;sword&#34;,
]

use_item(inventory[3])  # gems
use_item(inventory[-2])  # healing heart
print(inventory.size())  # 6
</code></pre><h3 id="lesson-24---creating-dictionaries">Lesson 24 - Creating Dictionaries</h3>
<pre tabindex="0"><code>var inventory = {
    &#34;healing heart&#34;: 3,
    &#34;gems&#34;: 5,
    &#34;sword&#34;: 1,
}

var item_count = inventory[&#34;gems&#34;]
inventory[&#34;healing heart&#34;] += 1
</code></pre><p>A key could be a string, a number, or even a vector!<br>
Every key has to be unique.</p>
<h3 id="lesson-25---looping-over-dictionaries">Lesson 25 - Looping over dictionaries</h3>
<p>To get the list of keys in the dictionary, you can call its keys() member function.</p>
<pre tabindex="0"><code>var inventory = {
    &#34;healing heart&#34;: 3,
    &#34;gems&#34;: 5,
    &#34;sword&#34;: 1,
}

for item_name in inventory.keys():
    print(item_name)  # healing heart
                      # gems
                      # sword
</code></pre><p>Instead, you can directly type the variable name in a for loop after the in keyword. The language understands that you implicitly want to loop over the dictionary&rsquo;s keys.</p>
<pre tabindex="0"><code>var inventory = {
    &#34;healing heart&#34;: 3,
    &#34;gems&#34;: 5,
    &#34;sword&#34;: 1,
}

for item_name in inventory:
    var item_count = inventory[item_name]
    print(item_name + &#34;: &#34; + str(item_count))  # healing heart: 3
                                               # gems: 5
                                               # sword: 1
</code></pre><pre tabindex="0"><code>var unit_cells = {
    Vector2(1, 0): &#34;robot&#34;,
    Vector2(2, 2): &#34;turtle&#34;,
    Vector2(3, 0): &#34;robot&#34;,
}

for cell in unit_cells:
    var unit = unit_cells[cell]
</code></pre><h3 id="lesson-26---value-types">Lesson 26 - Value types</h3>
<p>You can get the text representation of a value by calling the str() function (short for &ldquo;string&rdquo;). The function returns its argument as a new String.<br>
You can use this function whenever you want to turn some number or vector into text.</p>
<p>You can also convert strings into whole numbers or decimal numbers using respectively the int() and float() functions.</p>
<pre tabindex="0"><code>print(Vector2(1, 1) * 10)  # (10, 10)
</code></pre><pre tabindex="0"><code>print(3 / 2)  # 1
print(3.0 / 2.0)  # 1.5
</code></pre><h3 id="lesson-27---specifying-types-with-type-hints">Lesson 27 - Specifying types with type hints</h3>
<pre tabindex="0"><code>var cell_size: Vector2 = Vector2(50.0, 50.0)
</code></pre><p>Type Inference</p>
<pre tabindex="0"><code>var cell_size := Vector2(50.0, 50.0)
</code></pre><pre tabindex="0"><code>var vector: Vector2 = Vector2(1, 1)
var text: String = &#34;Hello, world!&#34;
var whole_number: int = 4
var decimal_number: float = 3.14
</code></pre><h2 id="godot-docs---getting-started">GODOT DOCS - GETTING STARTED</h2>
<p>初期化時に呼ばれる仮想関数は _init()<br>
フレームごとに呼ばれる仮想関数は _process()<br>
_ready()<br>
_process() は一番最初の呼び出しであったとしても delta は 0.0 ではない</p>
<pre tabindex="0"><code>Vector2.ZERO  # (0.0, 0.0)
Vector2.UP  # (0.0, -1.0)
</code></pre><pre tabindex="0"><code>if Input.is_action_pressed(&#34;ui_left&#34;):
    pass  # The Left key is being pressed
if Input.is_action_pressed(&#34;ui_right&#34;):
    pass  # The Right key is being pressed
if Input.is_action_pressed(&#34;ui_up&#34;):
    pass  # The Up key is being pressed
</code></pre><pre tabindex="0"><code>not true  # false
</code></pre><p>_process() の処理をさせたりさせなかったりする<br>
処理しているとき is_processing() は true<br>
処理していないとき is_processing() は false<br>
set_process(true) で処理をさせるようにする<br>
set_process(false) で処理をさせないようにする</p>
<pre tabindex="0"><code>set_process(not is_processing())
</code></pre><p>$ is shorthand for get_node() i.e. $AnimatedSprite2D.play() is the same as get_node(&ldquo;AnimatedSprite2D&rdquo;).play<br>
$ returns the node at the relative path from the current node, or returns null if the node is not found<br>
Since AnimatedSprite2D is a child of the current node, we can use $AnimatedSprite2D</p>
<p>connect()<br>
visible<br>
Vector2::length()<br>
Vector2::normalized()</p>
<p>画面外に出ないようにする</p>
<pre tabindex="0"><code>var screen_size: Vector2
func _ready() -&gt; void:
    screen_size = get_viewport_rect().size
func _process(d: float) -&gt; void:
    position.clamp(Vector2.ZERO, screen_size)
</code></pre><pre tabindex="0"><code>if v.x != 0.0:
    pass
elif v.y != 0.0:
    pass
</code></pre><pre tabindex="0"><code>$AnimatedSprite2D.flip_h = v.x &lt; 0.0
</code></pre><p>is equal to</p>
<pre tabindex="0"><code>if v.x &lt; 0.0:
    $AnimatedSprite2D.flip_h = true
else:
    $AnimatedSprite2D.flip_h = false
</code></pre><p>hide()<br>
show()</p>
<p>$AnimatedSprite2D.animation = &ldquo;walk&rdquo; <br>
$AnimatedSprite2D.flip_v = false<br>
$AnimatedSprite2D.flip_h = v.x &lt; 0.0</p>
<p>$CollisionShape2D.set_deferred(&ldquo;disabled&rdquo;, true)</p>
<p>Disabling the area&rsquo;s collision shape can cause an error if it happens in the middle of the engine&rsquo;s collision processing. Using set_deferred() tells Godot to wait to disable the shape until it&rsquo;s safe to do so.</p>
<p>randi()</p>
<p>_physics_process(d)</p>
<p>Vector3::normalized()<br>
CharacterBody3D::move_and_slide()<br>
look_at_from_position()<br>
rotate_y()<br>
Vector3.FORWARD<br>
PackedScene<br>
get_node()<br>
randf()<br>
add_child()<br>
CharacterBody3D::get_slide_collision_count()<br>
CharacterBody3D::get_slide_collision()<br>
Node::is_in_group()<br>
Vector3::dot()<br>
queue_free()<br>
text = &ldquo;Score: %s&rdquo; % score<br>
event.is_action_pressed(&ldquo;ui_accept&rdquo;)<br>
visible<br>
get_tree().reload_current_scene()</p>


<a href="../../">戻る</a>

<div class="comento" id="comento"></div>

<form class="comento-form" name="comento">
  <label>Name:<br><input type="text" name="name" value="John Doe"></label><br>
  <br>
  <label>Comment:<br><textarea name="comment" placeholder="故障中"></textarea></label><br>
  <br>
  <button type="button" onclick="post()">Submit</button>
</form>

<style>
body {
  margin: 10px;
}

pre {
  color: white;
  background-color: black;
}

.comento {
  background-color: black;
  padding-top:    10px;
  padding-left:   10px;
  padding-right:  10px;
  padding-bottom: 10px;
}

.name {
  color: white;
  background-color: grey;
  margin-top:    0px;
  margin-bottom: 0px;
}

.comment {
  color: white;
  background-color: grey;
  margin-top:     0px;
  margin-bottom: 20px;
}

.comento-form {
  color: white;
  background-color: black;
  padding-left:   10px;
  padding-right:  10px;
  padding-bottom: 10px;
}
</style>

<script>
let action = "";

if (/\/$/.test(location.pathname)) {
  action = 'https://hoge1.xyz/get?thread=' + location.pathname + 'index.html';
} else {
  action = 'https://hoge1.xyz/get?thread=' + location.pathname;
}

fetch(action, {
  mode: 'cors'
}).then(res => {
  return res.text();
}).then(text => {
  let data = JSON.parse(text);
  let comments = "";
  for (let record of data) {
    comments += '<p class="name">' + record.name + '</p>'
        + '<p class="comment">' + record.comment + "</p>";
  }
  comento.innerHTML = comments;
});

function post() {
  let action;

  if (/\/$/.test(location.pathname)) {  
    action = 'https://hoge1.xyz/post?thread=' + location.pathname + 'index.html';
  } else {
    action = 'https://hoge1.xyz/post?thread=' + location.pathname;
  }

  document.comento.method = 'post';
  document.comento.action = action;
  document.comento.submit();
}
</script>
</body>

</html>
